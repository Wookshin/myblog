---
title: 디자인 패턴 - 메멘토(Memento) 패턴 
subtitle: 객체를 이전의 상태로 복구시켜야하는 경우
readtime: 15 min
author: wookshin
tags: [pattern]
comments: true
---

<br/>

# 디자인 패턴 - 메멘토(Memento) 패턴 

객체를 이전의 상태로 복구시켜야 하는 경우에 메멘토 패턴을 사용합니다.  
예를 들어 사용자가 "작업 취소"를 요청하는 경우입니다.  

## 1. 메멘토 패턴이란?

메멘토 패턴은 행동 패턴으로 분류되며 객체의 이전 상태를 저장하고 복구하도록 합니다.   저장하고 복구하는 구현 디테일은 숨겨놓습니다.  

## 2. 언제 사용하나?

텍스트 에디터 작성 시, Undo 기능을 통해 이전 상태로 되돌리는 상황에서 메멘토 패턴을 적용할 수 있습니다. 혹은 게임에서 케릭터가 죽었을 시 특정 저장시점으로 케릭터의 위치를 되돌리는 작업에도 메멘토 패턴을 적용할 수 있습니다.

문제

- 객체의 필드 값들을 저장해야하는데, 이 필드값들은 보통 private인데 접근이 가능하겠는가?
- 객체의 필드 값들을 Public으로 해놓는다면 추후 필드가 추가되거나 삭제되었을 때 해당 객체를 참조하고 있는 스냅샷 객체들에 영향을 끼친다.
- 그리고 스냅샷 객체를 활용하려면 스냅샷 객체들의 필드를 Public으로 해야한다. 이는 오리지날 객체의 필드가 Private이든 Public이든 노출되기 마련이다. 스냅샷을 의존하고 있는 클래스들은 스냅샷 클래스 변화에 영향을 받는다.

해결방법

- 

## 2. 메멘토 패턴 작동 원리

## 3. 메멘토 패턴의 장점

- 저장된 상태를 핵심 객체와는 다른 별도의 객체에 보관하기 때문에 안전합니다.
- 핵심 객체의 데이터를 계속해서 캡슐화된 상태로 유지할 수 있습니다.
- 복구 기능을 구현하기가 쉽습니다.

## 4. 메멘토 패턴 활용법 및 단점

- 메멘토 객체를 써서 상태를 저장합니다.
- 상태를 저장하고 복구하는 데 시간이 오래 걸릴 수 있다는 단점이 있습니다.
- 자바 시스템에서는 시스템의 상태를 저장할 때 직렬화를 사용하는 것이 좋습니다.




> 참조  
> Head First Design Pattern - 메멘토 패턴 (662p)
> https://refactoring.guru/design-patterns/memento
